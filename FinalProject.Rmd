---
title: "Final Project"
output: html_document
date: "2025-02-26"

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Load the libraries
```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
library(naniar)
library(ggmap)
```

```{r}
options(scipen = 999)
```


## Load the Data
```{r}
cardiac <- read_csv("data/cardiac-surgery.csv") %>% clean_names()
```

```{r}
glimpse(cardiac)
```

## Cleaning the Data
```{r}
cardiac <- cardiac %>% 
  mutate(year_of_hospital_discharge = as.factor(year_of_hospital_discharge)) %>% 
  mutate(facility_id = as.factor(facility_id))
```

```{r}
cardiac <- cardiac %>% 
  mutate(across(everything(), tolower))
cardiac
```

```{r}
cardiac <- cardiac %>%
  mutate(across(everything(), tolower)) %>% 
  mutate(across(everything(), ~ str_replace_all((.), " ", "_"))) %>% 
  mutate(across(everything(), ~ str_replace_all((.), "__", "_"))) %>% 
  mutate(across(-year_of_hospital_discharge, ~ str_remove((.), "-")))
cardiac
```

Have to separate the data, as some of them are over a range of a couple of years, some of them are year by year
```{r}
sites_with_ranges <- cardiac %>%
  filter(str_detect(year_of_hospital_discharge, "-", negate = FALSE))

sites_per_year <- cardiac %>% 
  filter(str_detect(year_of_hospital_discharge, "-", negate = TRUE))
```


